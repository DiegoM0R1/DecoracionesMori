{% extends "base.html" %}

{% block title %} - Inicio{% endblock %}
{% block extra_css %}
<style>
    /* Mejoras generales */
:root {
  --primary-color: #007bff;
  --secondary-color: #0056b3;
  --accent-color: #ffc107;
  --text-dark: #343a40;
  --text-muted: #6c757d;
  --bg-light: #f8f9fa;
  --transition-standard: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
  --box-shadow-subtle: 0 4px 20px rgba(0, 0, 0, 0.08);
  --box-shadow-hover: 0 10px 25px rgba(0, 0, 0, 0.15);
}

/* Mejoras para el Hero Section */
.hero-carousel .carousel-item {
    height: 90vh; /* Aumentado para mayor impacto */
    position: relative;
}

.hero-carousel .carousel-item::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)); /* Overlay para mejor legibilidad */
    z-index: 1;
}

.hero-carousel .carousel-caption {
    z-index: 2;
    max-width: 800px;
}

.hero-carousel .carousel-caption h1 {
    font-size: 4rem;
    font-weight: 800;
    letter-spacing: -0.5px;
    text-transform: uppercase;
    animation: fadeInUp 1.2s cubic-bezier(0.215, 0.61, 0.355, 1);
    margin-bottom: 1.5rem;
}

.hero-carousel .carousel-caption p {
    font-size: 1.7rem;
    font-weight: 300;
    animation: fadeInUp 1.2s cubic-bezier(0.215, 0.61, 0.355, 1) 0.3s;
    margin-bottom: 2.5rem;
}

.hero-carousel .carousel-caption .btn-primary {
    padding: 0.75rem 2rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 1.1rem;
    box-shadow: 0 4px 15px rgba(0, 123, 255, 0.4);
    animation: fadeInUp 1.2s cubic-bezier(0.215, 0.61, 0.355, 1) 0.6s;
    transition: var(--transition-standard);
}

.hero-carousel .carousel-caption .btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 123, 255, 0.5);
}

/* Indicadores y controles del carrusel mejorados */
.carousel-control-prev,
.carousel-control-next {
    width: 10%;
    z-index: 3;
}

.carousel-indicators {
    z-index: 3;
}

.carousel-indicators [data-bs-target] {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin: 0 8px;
    background-color: rgba(255, 255, 255, 0.6);
    border: none;
    transition: var(--transition-standard);
}

.carousel-indicators .active {
    background-color: var(--primary-color);
    transform: scale(1.2);
}

/* Mejoras para la sección de Servicios */
.section-title {
    font-size: 3rem;
    font-weight: 800;
    letter-spacing: -0.5px;
    margin-bottom: 1rem;
    position: relative;
    display: inline-block;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 4px;
    background-color: var(--primary-color);
    animation: expandWidth 1.5s cubic-bezier(0.215, 0.61, 0.355, 1) forwards;
}

.section-subtitle {
    font-size: 1.3rem;
    font-weight: 300;
    color: var(--text-muted);
    max-width: 800px;
    margin: 1rem auto 3rem;
}

.service-card {
    border: none;
    border-radius: 0.8rem;
    overflow: hidden;
    box-shadow: var(--box-shadow-subtle);
    transition: var(--transition-standard);
    transform: translateY(0);
}

.service-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--box-shadow-hover);
}

.service-card img {
    height: 220px;
    transition: var(--transition-standard);
}

.service-card:hover img {
    transform: scale(1.05);
}

.service-card .card-body {
    padding: 2rem 1.5rem;
}

.service-card .card-title {
    font-size: 1.4rem;
    font-weight: 700;
    margin-bottom: 1rem;
    position: relative;
    padding-bottom: 1rem;
}

.service-card .card-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 50px;
    height: 3px;
    background-color: var(--primary-color);
    transition: var(--transition-standard);
}

.service-card:hover .card-title::after {
    width: 80px;
}

.service-card .btn-outline-primary {
    border-width: 2px;
    font-weight: 600;
    padding: 0.5rem 1.5rem;
    margin-top: 1rem;
    position: relative;
    overflow: hidden;
    z-index: 1;
}

.service-card .btn-outline-primary::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0%;
    height: 100%;
    background-color: var(--primary-color);
    transition: var(--transition-standard);
    z-index: -1;
}

.service-card .btn-outline-primary:hover {
    color: white;
}

.service-card .btn-outline-primary:hover::before {
    width: 100%;
}

/* Mejoras para la sección Por qué elegirnos */
.feature-box {
    padding: 3rem 2rem;
    border-radius: 1rem;
    background-color: white;
    box-shadow: var(--box-shadow-subtle);
    transition: var(--transition-standard);
    transform: translateY(0);
}

.feature-box:hover {
    transform: translateY(-10px);
    box-shadow: var(--box-shadow-hover);
}

.feature-icon {
    display: inline-block;
    width: 100px;
    height: 100px;
    line-height: 100px;
    border-radius: 50%;
    background-color: rgba(0, 123, 255, 0.1);
    margin-bottom: 2rem;
    position: relative;
    transition: var(--transition-standard);
}

.feature-box:hover .feature-icon {
    background-color: rgba(0, 123, 255, 0.2);
    transform: scale(1.1) rotate(5deg);
}

.feature-icon::after {
    content: '';
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
    border-radius: 50%;
    border: 2px dashed rgba(0, 123, 255, 0.3);
    animation: spin 15s linear infinite;
}

.feature-box h4 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    position: relative;
    padding-bottom: 1rem;
    display: inline-block;
}

.feature-box h4::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background-color: var(--primary-color);
    transform: scaleX(0.3);
    transition: var(--transition-standard);
}

.feature-box:hover h4::after {
    transform: scaleX(1);
}

.feature-box p {
    font-size: 1.1rem;
    color: var(--text-muted);
    line-height: 1.7;
}

/* Mejoras para la sección de Testimonios */
.testimonials {
    background: linear-gradient(135deg, #f6f7f9 0%, #e9ecef 100%);
    position: relative;
    overflow: hidden;
}

.testimonials::before {
    content: '';
    position: absolute;
    top: -50px;
    left: -50px;
    width: 200px;
    height: 200px;
    border-radius: 50%;
    background-color: rgba(0, 123, 255, 0.05);
}

.testimonials::after {
    content: '';
    position: absolute;
    bottom: -100px;
    right: -100px;
    width: 300px;
    height: 300px;
    border-radius: 50%;
    background-color: rgba(0, 123, 255, 0.05);
}

.testimonial-item {
    padding: 3rem 2rem;
    border-radius: 1rem;
    background-color: white;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
    position: relative;
    z-index: 1;
    margin: 1.5rem;
    transition: var(--transition-standard);
}

.testimonial-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
}

.testimonial-item::before {
    content: '"';
    font-family: Georgia, serif;
    position: absolute;
    top: 20px;
    left: 20px;
    font-size: 6rem;
    line-height: 1;
    color: rgba(0, 123, 255, 0.1);
    z-index: -1;
}

.testimonial-item img {
    width: 110px;
    height: 110px;
    object-fit: cover;
    border-radius: 50%;
    margin: 0 auto 1.5rem;
    border: 5px solid white;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    transition: var(--transition-standard);
}

.testimonial-item:hover img {
    transform: scale(1.1);
    border-color: rgba(0, 123, 255, 0.3);
}

.testimonial-item blockquote p {
    font-size: 1.2rem;
    line-height: 1.8;
    color: var(--text-dark);
    font-style: italic;
    margin-bottom: 1.5rem;
}

.testimonial-item blockquote footer.blockquote-footer {
    font-size: 1rem;
    font-weight: 600;
    color: var(--primary-color);
}

.testimonial-item blockquote footer.blockquote-footer::before {
    content: '— ';
}

/* Mejoras para la sección CTA */
.cta-section {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    position: relative;
    overflow: hidden;
    padding: 5rem 0;
}

.cta-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E") repeat;
    animation: moveBackground 60s linear infinite;
}

.cta-section h2 {
    font-size: 3rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    text-transform: uppercase;
    letter-spacing: -0.5px;
    animation: fadeInUp 1.2s cubic-bezier(0.215, 0.61, 0.355, 1);
}

.cta-section p {
    font-size: 1.5rem;
    font-weight: 300;
    margin-bottom: 2.5rem;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    animation: fadeInUp 1.2s cubic-bezier(0.215, 0.61, 0.355, 1) 0.3s;
}

.cta-section .btn-light {
    padding: 1rem 2.5rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-radius: 50px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    transition: var(--transition-standard);
    animation: pulse 2s infinite;
}

.cta-section .btn-light:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
}

/* Nuevas animaciones mejoradas */
@keyframes expandWidth {
    from { width: 0; }
    to { width: 80px; }
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes moveBackground {
    from { background-position: 0 0; }
    to { background-position: 100% 100%; }
}

@keyframes pulse {
    0% {
        transform: scale(1);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(40px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideInDown {
    from {
        opacity: 0;
        transform: translateY(-40px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes zoomIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Efectos de aparición al hacer scroll */
.reveal {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s cubic-bezier(0.5, 0, 0, 1);
}

.reveal.active {
    opacity: 1;
    transform: translateY(0);
}
</style>
{% endblock %}
{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-carousel carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target=".hero-carousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target=".hero-carousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target=".hero-carousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="https://diegom0r1.github.io/decomoriweb/img/Sala-Feng-Shui-pc.jpg" class="d-block w-100" alt="DecoracionesMori">
                <div class="carousel-caption">
                    <h1>Bienvenido a Decoraciones Mori</h1>
                    <p>Transforma tu espacio con nuestros servicios de limpieza, instalación y decoración de primera calidad</p>
                    <a href="{% url 'services:service_list' %}" class="btn btn-primary btn-lg">Ver Servicios</a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://diegom0r1.github.io/decomoriweb/img/cortinas-pc.jpg" class="d-block w-100" alt="Limpieza">
                <div class="carousel-caption">
                    <h1>Servicios de Limpieza Profesional</h1>
                    <p>Limpieza de colchones, muebles, alfombras y más</p>
                    <a href="" class="btn btn-primary btn-lg">Ver Detalles</a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://diegom0r1.github.io/decomoriweb/img/alfombradoslider-pc.jpg" class="d-block w-100" alt="Instalaciones">
                <div class="carousel-caption">
                    <h1>Instalaciones Profesionales</h1>
                    <p>Cortinas, alfombras, pisos y más</p>
                    <a href="" class="btn btn-primary btn-lg">Ver Detalles</a>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target=".hero-carousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Anterior</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target=".hero-carousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Siguiente</span>
        </button>
    </div>
</section>

<!-- Services Overview Section -->
<!-- Services Overview Section -->
<section class="services-overview py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="section-title">Categorías de Servicios</h2>
                <p class="section-subtitle">Explora nuestras diferentes categorías de servicios</p>
            </div>
        </div>
        
        <div class="row">
            {% load static %} {# Asegúrate que 'static' esté cargado, ya sea aquí o al inicio del archivo #}
            {% for item in categories_with_service %}
            <div class="col-md-4 mb-4">
                <div class="card service-card h-100">
                    {% with featured_image=item.service.get_featured_image %}
                        {# Contenedor para mantener altura y estilo consistentes con tu CSS (.service-card img { height: 220px; }) #}
                        <div class="card-img-top-container" style="height: 220px; overflow: hidden; background-color: #eee; border-top-left-radius: 0.8rem; border-top-right-radius: 0.8rem;">
                            {% if featured_image %}
                                {% if featured_image.image_url %}
                                    {# Renderizar el embed code (iframe) #}
                                    {{ featured_image.image_url|safe }}
                                {% elif featured_image.image %}
                                    {# Renderizar la imagen subida #}
                                    <img src="{{ featured_image.image.url }}" class="card-img-top" alt="{{ item.category.name }}" style="width: 100%; height: 100%; object-fit: cover;">
                                {% else %}
                                    {# Placeholder por defecto si featured_image existe pero no tiene fuente #}
                                    <img src="static/imagen/default-service.jpg" class="card-img-top" alt="{{ item.category.name }}" style="width: 100%; height: 100%; object-fit: cover;">
                                {% endif %}
                            {% else %}
                                {# Placeholder por defecto si get_featured_image devolvió None #}
                                 <img src="static/imagen/default-service.jpg" class="card-img-top" alt="{{ item.category.name }}" style="width: 100%; height: 100%; object-fit: cover;">
                            {% endif %}
                        </div>
                    {% endwith %}
                    <div class="card-body">
                        <h5 class="card-title">{{ item.category.name }}</h5>
                        <p class="card-text">{{ item.category.description }}</p>
                        {% if item.service %} {# Comprobación por si acaso item.service fuera None #}
                        <p class="card-text"><small class="text-muted">Servicio destacado: {{ item.service.name }}</small></p>
                        {% endif %}
                        <a href="{% url 'services:category' item.category.id %}" class="btn btn-outline-primary"><p style="color: #f8f9fa;">ver categoria</p></a>
                    </div>
                </div>
            </div>
            {% empty %}
             <div class="col-12">
                 <p class="text-center">No hay categorías de servicio para mostrar.</p>
             </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-4">
            <a href="{% url 'services:service_list' %}" class="btn btn-primary">Ver todos los servicios</a>
        </div>
    </div>
</section>

<!-- Why Choose Us Section -->
<section class="why-choose-us py-5 bg-light">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="section-title">¿Por qué elegirnos?</h2>
                <p class="section-subtitle">Nos destacamos por la calidad y profesionalismo</p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="feature-box text-center">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-medal fa-3x text-primary"></i>
                    </div>
                    <h4>Calidad Garantizada</h4>
                    <p>Utilizamos los mejores materiales y técnicas para garantizar resultados excepcionales.</p>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="feature-box text-center">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-user-tie fa-3x text-primary"></i>
                    </div>
                    <h4>Personal Capacitado</h4>
                    <p>Nuestro equipo está formado por profesionales con amplia experiencia en el sector.</p>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="feature-box text-center">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-clock fa-3x text-primary"></i>
                    </div>
                    <h4>Puntualidad y Eficiencia</h4>
                    <p>Cumplimos con los plazos establecidos y optimizamos nuestros procesos para ser eficientes.</p>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- CTA Section -->
<section class="cta-section py-5 bg-primary text-white text-center">
    <div class="container">
        <h2 class="mb-4">¿Listo para transformar tu espacio?</h2>
        <p class="mb-4">Contáctanos ahora y recibe una cotización personalizada para tus necesidades.</p>
        <a href="{% url 'services:contacto' %}" class="btn btn-light btn-lg">Contáctanos Ahora</a>
    </div>
</section>

{% block extra_js %}
<script>
    // Script para activar animaciones al hacer scroll
    document.addEventListener('DOMContentLoaded', function() {
        // Añadir clase 'reveal' a los elementos que queremos animar
        const elementsToReveal = document.querySelectorAll('.section-title, .section-subtitle, .service-card, .feature-box, .testimonial-item');
        
        elementsToReveal.forEach(function(element) {
            element.classList.add('reveal');
        });
        
        // Función para verificar si un elemento está en la vista
        function checkIfInView() {
            const windowHeight = window.innerHeight;
            const windowTopPosition = window.pageYOffset;
            const windowBottomPosition = windowTopPosition + windowHeight;
            
            elementsToReveal.forEach(function(element) {
                const elementHeight = element.offsetHeight;
                const elementTopPosition = element.getBoundingClientRect().top + window.pageYOffset;
                const elementBottomPosition = elementTopPosition + elementHeight;
                
                // Verificar si el elemento está en la vista
                if ((elementBottomPosition >= windowTopPosition) && (elementTopPosition <= windowBottomPosition)) {
                    element.classList.add('active');
                }
            });
        }
        
        // Verificar al cargar la página
        checkIfInView();
        
        // Verificar al hacer scroll
        window.addEventListener('scroll', checkIfInView);
        
        // Mejorar la transición entre slides del carrusel
        const heroCarousel = document.querySelector('.hero-carousel');
        if (heroCarousel) {
            heroCarousel.addEventListener('slide.bs.carousel', function (e) {
                const activeItem = this.querySelector('.active');
                const activeCaption = activeItem.querySelector('.carousel-caption');
                
                // Reset animations
                activeCaption.querySelector('h1').style.animation = 'none';
                activeCaption.querySelector('p').style.animation = 'none';
                activeCaption.querySelector('.btn').style.animation = 'none';
                
                setTimeout(function() {
                    activeCaption.querySelector('h1').style.animation = '';
                    activeCaption.querySelector('p').style.animation = '';
                    activeCaption.querySelector('.btn').style.animation = '';
                }, 10);
            });
        }
    });
    </script>
{% endblock %}

{% endblock %}