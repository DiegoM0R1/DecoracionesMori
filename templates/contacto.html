{% extends "base.html" %}
{% load static %}

{% block title %} - Contacto{% endblock %}

{% block content %}
<!-- Sesion de contacto -->
<section class="contact-section position-relative">
    <!-- Superposición moderna con degradado -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(135deg, rgba(0,0,0,0.85) 0%, rgba(45,52,75,0.8) 100%); z-index: 1;"></div>
    
    <!--Imagen de fondo con efecto de paralaje moderno -->
    
    <div class="container py-5 position-relative" style="z-index: 2;">
        <!-- Seccion de titulo -->
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="section-title text-white display-4 fw-bold mb-3">¿Cómo podemos ayudarte?</h2>
                <p class="section-subtitle text-white-50 fs-5 mb-4 mx-auto" style="max-width: 700px;">Transforma tu espacio con nuestros servicios de decoración personalizados. Estamos listos para atender tus consultas.</p>
            </div>
        </div>

        <div class="row g-4">
            <!-- Tarjeta de Información de Contacto -->
            <div class="col-md-5 mb-4">
                <div class="contact-info bg-white p-4 rounded-3 shadow-sm h-100">
                    <h4 class="mb-4 text-primary fw-bold">Información de contacto</h4>
                    
                    <!-- Dirección con punto de integración de mapa -->
                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-box bg-light rounded-circle p-3 me-3 d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                            <i class="fas fa-map-marker-alt text-primary"></i>
                        </div>
                        <div>
                            <p class="mb-0 fw-bold">Dirección:</p>
                            <p class="mb-0 text-muted">
                                {% if site_settings and site_settings.address %}
                                    {{ site_settings.address }}
                                {% else %}
                                    Urbanización Mariscal Cáceres Mz P6 Lt 23, San Juan Lurigancho, Lima
                                {% endif %}
                            </p>
                            <a href="#vermapa" class="text-primary small mt-1">Ver en mapa <i class="fas fa-chevron-right ms-1 small"></i></a>
                        </div>
                    </div>
                    
                    <!-- Teléfono con clic para llamar -->
                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-box bg-light rounded-circle p-3 me-3 d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                            <i class="fas fa-phone-alt text-primary"></i>
                        </div>
                        <div>
                            <p class="mb-0 fw-bold">Teléfono:</p>
                            <a href="tel:{% if site_settings and site_settings.phone %}{{ site_settings.phone }}{% else %}+51923614593{% endif %}" class="text-muted text-decoration-none">
                                {% if site_settings and site_settings.phone %}
                                    {{ site_settings.phone }}
                                {% else %}
                                    +51 923 614 593
                                {% endif %}
                            </a>
                        </div>
                    </div>
                    
                    <!-- Email -->
                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-box bg-light rounded-circle p-3 me-3 d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                            <i class="fas fa-envelope text-primary"></i>
                        </div>
                        <div>
                            <p class="mb-0 fw-bold">Email:</p>
                            <a href="mailto:{% if site_settings and site_settings.email %}{{ site_settings.email }}{% else %}lizandro.morih1@gmail.com{% endif %}" class="text-muted text-decoration-none">
                                {% if site_settings and site_settings.email %}
                                    {{ site_settings.email }}
                                {% else %}
                                    lizandro.morih1@gmail.com
                                {% endif %}
                            </a>
                        </div>
                    </div>
                    
                    <!-- Horario de atención -->
                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-box bg-light rounded-circle p-3 me-3 d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                            <i class="fas fa-clock text-primary"></i>
                        </div>
                        <div>
                            <p class="mb-0 fw-bold">Horario de atención:</p>
                            <p class="mb-0 text-muted">Lunes a Viernes: 9am - 6pm</p>
                            <p class="mb-0 text-muted">Sábados: 9am - 1pm</p>
                        </div>
                    </div>
                    
                    <!-- Social Media -->
                    <div class="mt-4">
                        <h5 class="mb-3">Síguenos</h5>
                        <div class="d-flex">
                            <!-- Facebook -->
                            <a href="{% if site_settings and site_settings.facebook_url %}{{ site_settings.facebook_url }}{% else %}https://www.facebook.com/share/1AFLkMRDkM/{% endif %}" class="btn btn-light me-2 rounded-circle" style="width: 40px; height: 40px; line-height: 40px; padding: 0;" target="_blank" rel="noopener noreferrer">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <!-- Instagram -->
                            <a href="{% if site_settings and site_settings.instagram_url %}{{ site_settings.instagram_url }}{% else %}https://www.instagram.com/decoracionesmori/{% endif %}" class="btn btn-light me-2 rounded-circle" style="width: 40px; height: 40px; line-height: 40px; padding: 0;" target="_blank" rel="noopener noreferrer">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <!-- WhatsApp -->
                            <a href="{% if site_settings and site_settings.whatsapp_number %}https://wa.me/{{ site_settings.whatsapp_number }}{% else %}https://wa.me/51923614593{% endif %}" class="btn btn-light me-2 rounded-circle" style="width: 40px; height: 40px; line-height: 40px; padding: 0;" target="_blank" rel="noopener noreferrer">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Form Card -->
            <div class="col-md-7 mb-4">
                <div class="bg-white p-4 rounded-3 shadow-sm">
                    <h4 class="mb-4 text-primary fw-bold">Envíanos un mensaje</h4>
                    <!-- Punto de integración de API: Envío y validación del formulario -->
                    <form id="contactForm" action="{% url 'services:contacto' %}" method="POST" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="name" name="name" placeholder="Tu nombre" required>
                                    <label for="name">Nombre completo</label>
                                    <div class="invalid-feedback">
                                        Por favor ingresa tu nombre
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="email" name="email" placeholder="Tu correo electrónico" required>
                                    <label for="email">Correo electrónico</label>
                                    <div class="invalid-feedback">
                                        Por favor ingresa un correo válido
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-floating mb-3">
                            <input type="tel" class="form-control" id="phone" name="phone" placeholder="Tu teléfono">
                            <label for="phone">Teléfono (opcional)</label>
                        </div>
                        
                        <!-- Punto de integración de API: Selección de servicio -->
                        <div class="form-floating mb-3">
                            <select class="form-select" id="service" name="service">
                                <option value="" selected disabled>Selecciona un servicio</option>
                                <option value="limpieza">Limpieza y desinfección</option>
                                <option value="tapiceria">Tapicería y restauración</option>
                                <option value="cortinas">Instalación de cortinas</option>
                                <option value="decoracion">Decoración de interiores</option>
                                <option value="mantenimiento">Mantenimiento de muebles</option>
                                <option value="otro">Otro</option>
                            </select>
                            <label for="service">Servicio de interés</label>
                        </div>
                        
                        <div class="form-floating mb-3">
                            <textarea class="form-control" id="message" name="message" style="height: 150px" placeholder="Escribe tu mensaje..." required></textarea>
                            <label for="message">Mensaje</label>
                            <div class="invalid-feedback">
                                Por favor escribe tu mensaje
                            </div>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                Enviar mensaje
                                <i class="fas fa-paper-plane ms-2"></i>
                            </button>
                        </div>
                        
                        <!-- Punto de integración de API: Mensajes de éxito/error -->
                        <div id="formResult" class="mt-3"></div>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Punto de integración de API: Google Maps -->
        <div class="row mt-3" id="vermapa">
            <div class="col-12">
                <div class="card rounded-3 shadow-sm overflow-hidden">
                    <div class="card-body p-0" style="height: 400px;">
                        <!-- Iframe de Google Maps directo sin depender de site_settings.map_url -->
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3902.8567455456373!2d-79.8532808!3d-6.7684347!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x904cef2336bb85fd%3A0x33c552a2cfbc7a6!2sChiclayo%2C%20Per%C3%BA!5e0!3m2!1ses!2s!4v1620901234567!5m2!1ses!2s" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                    </div>
                </div>
            </div>
        </div>   
    </div>
</section>
{% endblock %}

{% block extra_js %}
<!-- Carga el archivo JavaScript separado -->
<script src="{% static 'js/contact.js' %}"></script>

{% endblock %}